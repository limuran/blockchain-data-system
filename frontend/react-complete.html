<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>åŒºå—é“¾æ•°æ®ä¸Šé“¾ç³»ç»Ÿ</title>

    <!-- React & Dependencies -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.1/ethers.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bignumber.js/9.1.1/bignumber.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      body {
        font-family: 'Inter', sans-serif;
        margin: 0;
      }
      .glass {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      const { useState, useEffect } = React

      // ğŸ”§ å…¨å±€é…ç½®
      const CONFIG = {
        SEPOLIA_USDT: '0x7169D38820dfd117C3FA1f22a697dBA58d90BA06',
        ETHERSCAN: 'https://sepolia.etherscan.io',
        GRAPH_API:
          'https://api.thegraph.com/subgraphs/name/limuran/usdt-data-tracker',
        NETWORK_ID: 11155111
      }

      // ğŸ—ï¸ ä¸»åº”ç”¨ç»„ä»¶ - åŸºç¡€æ¶æ„
      function App() {
        const [activeTab, setActiveTab] = useState('eth')
        const [wallet, setWallet] = useState({
          address: null,
          ensName: null,
          ensAvatar: null,
          ethBalance: '0.00',
          usdtBalance: '0.00'
        })
        const [records, setRecords] = useState([])
        const [stats, setStats] = useState({ tx: 0, data: 0 })

        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-800">
            <div className="container mx-auto p-6 max-w-7xl">
              {/* ğŸ¯ å¤´éƒ¨ */}
              <div className="glass rounded-2xl p-6 mb-8 shadow-2xl">
                <div className="flex justify-between items-center flex-wrap gap-4">
                  <div className="flex items-center">
                    <span className="text-3xl mr-3">â›“ï¸</span>
                    <div>
                      <h1 className="text-2xl font-bold text-gray-800">
                        åŒºå—é“¾æ•°æ®ä¸Šé“¾ç³»ç»Ÿ
                      </h1>
                      <p className="text-sm text-gray-600">
                        æ”¯æŒ: ETHè½¬è´¦ | ä»£å¸è½¬è´¦ | åˆçº¦å­˜å‚¨ | The GraphæŸ¥è¯¢
                      </p>
                    </div>
                  </div>

                  <div className="flex items-center gap-4">
                    <div className="flex items-center bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm">
                      <div className="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></div>
                      Sepolia æµ‹è¯•ç½‘
                    </div>

                    {/* é’±åŒ…æŒ‰é’®å ä½ */}
                    <div className="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold">
                      ğŸ‘› è¿æ¥é’±åŒ…
                    </div>
                  </div>
                </div>
              </div>

              <div className="grid lg:grid-cols-3 gap-8">
                {/* ğŸš€ ä¸»åŠŸèƒ½åŒº */}
                <div className="lg:col-span-2">
                  <div className="glass rounded-2xl p-8 shadow-2xl">
                    <h2 className="text-xl font-bold mb-6 flex items-center">
                      <span className="mr-3">ğŸš€</span>
                      æ•°æ®ä¸Šé“¾æ“ä½œ
                    </h2>

                    {/* æ ‡ç­¾é¡µå¯¼èˆª */}
                    <div className="flex mb-6 bg-gray-100 p-1 rounded-xl">
                      {[
                        {
                          id: 'eth',
                          label: 'ğŸ’° ETHè½¬è´¦',
                          desc: 'Ethers.jsæ–¹å¼1'
                        },
                        {
                          id: 'token',
                          label: 'ğŸª™ ä»£å¸è½¬è´¦',
                          desc: 'USDTåˆçº¦æ–¹å¼2'
                        },
                        {
                          id: 'contract',
                          label: 'ğŸ“ åˆçº¦å­˜å‚¨',
                          desc: 'äº‹ä»¶æ—¥å¿—å­˜å‚¨'
                        },
                        {
                          id: 'query',
                          label: 'ğŸ” æ•°æ®æŸ¥è¯¢',
                          desc: 'The GraphæŸ¥è¯¢'
                        }
                      ].map((tab) => (
                        <button
                          key={tab.id}
                          onClick={() => setActiveTab(tab.id)}
                          className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all text-center ${
                            activeTab === tab.id
                              ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform -translate-y-1'
                              : 'text-gray-600 hover:bg-white hover:shadow-sm'
                          }`}
                        >
                          <div className="font-semibold">{tab.label}</div>
                          <div className="text-xs opacity-75">{tab.desc}</div>
                        </button>
                      ))}
                    </div>

                    {/* å†…å®¹åŒºåŸŸ - ç»„ä»¶å ä½ */}
                    <div className="bg-gradient-to-br from-gray-50 to-blue-50 border-2 border-dashed border-gray-300 rounded-xl p-8 text-center">
                      <div className="text-6xl mb-4">ğŸš§</div>
                      <h3 className="text-2xl font-bold text-gray-700 mb-2">
                        Reactæ¶æ„å·²å°±ç»ª
                      </h3>
                      <p className="text-gray-500 mb-4">
                        å½“å‰é€‰æ‹©:{' '}
                        <span className="font-bold text-blue-600">
                          {activeTab}
                        </span>
                      </p>

                      <div className="bg-white rounded-lg p-6 max-w-md mx-auto">
                        <h4 className="font-bold mb-3 text-gray-800">
                          ğŸ“‹ ä¸‹æ­¥è®¡åˆ’:
                        </h4>
                        <div className="text-left space-y-2 text-sm">
                          <div className="flex items-center">
                            <span className="mr-2">âœ…</span>
                            <span>åŸºç¡€Reactæ¶æ„</span>
                          </div>
                          <div className="flex items-center">
                            <span className="mr-2">â³</span>
                            <span>é’±åŒ…è¿æ¥ç»„ä»¶</span>
                          </div>
                          <div className="flex items-center">
                            <span className="mr-2">â³</span>
                            <span>ETHè½¬è´¦ç»„ä»¶</span>
                          </div>
                          <div className="flex items-center">
                            <span className="mr-2">â³</span>
                            <span>ä»£å¸è½¬è´¦ç»„ä»¶</span>
                          </div>
                          <div className="flex items-center">
                            <span className="mr-2">â³</span>
                            <span>åˆçº¦å­˜å‚¨ç»„ä»¶</span>
                          </div>
                          <div className="flex items-center">
                            <span className="mr-2">â³</span>
                            <span>æ•°æ®æŸ¥è¯¢ç»„ä»¶</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* ğŸ“Š ä¾§è¾¹æ  */}
                <div className="space-y-6">
                  {/* ç»Ÿè®¡é¢æ¿ */}
                  <div className="glass rounded-2xl p-6 shadow-xl">
                    <h3 className="text-lg font-bold mb-4 flex items-center">
                      <span className="mr-2">ğŸ“Š</span>å®æ—¶ç»Ÿè®¡
                    </h3>
                    <div className="grid grid-cols-2 gap-4">
                      {[
                        {
                          label: 'ETHä½™é¢',
                          value: wallet.ethBalance,
                          icon: 'ğŸ’'
                        },
                        {
                          label: 'USDTä½™é¢',
                          value: wallet.usdtBalance,
                          icon: 'ğŸ’°'
                        },
                        { label: 'äº¤æ˜“æ¬¡æ•°', value: stats.tx, icon: 'ğŸ“Š' },
                        { label: 'æ•°æ®è®°å½•', value: stats.data, icon: 'ğŸ“‹' }
                      ].map((stat) => (
                        <div
                          key={stat.label}
                          className="text-center p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border border-blue-200"
                        >
                          <div className="text-2xl mb-1">{stat.icon}</div>
                          <div className="text-xl font-bold text-blue-600">
                            {stat.value}
                          </div>
                          <div className="text-xs text-gray-600">
                            {stat.label}
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  {/* APIçŠ¶æ€é¢æ¿ */}
                  <div className="glass rounded-2xl p-6 shadow-xl">
                    <h3 className="text-lg font-bold mb-4 flex items-center">
                      <span className="mr-2">ğŸŒ</span>APIçŠ¶æ€
                    </h3>
                    <div className="space-y-3">
                      {[
                        { name: 'Ethers.js', status: 'å·²åŠ è½½', color: 'green' },
                        { name: 'The Graph', status: 'å·²è¿æ¥', color: 'green' },
                        {
                          name: 'BigNumber.js',
                          status: 'å·²åŠ è½½',
                          color: 'green'
                        },
                        {
                          name: 'Infura API',
                          status: 'éœ€é…ç½®',
                          color: 'orange'
                        },
                        {
                          name: 'Alchemy API',
                          status: 'éœ€é…ç½®',
                          color: 'orange'
                        }
                      ].map((api) => (
                        <div
                          key={api.name}
                          className="flex justify-between items-center"
                        >
                          <span className="text-sm text-gray-700">
                            {api.name}
                          </span>
                          <span
                            className={`px-3 py-1 rounded-full text-xs font-medium ${
                              api.color === 'green'
                                ? 'bg-green-100 text-green-700'
                                : 'bg-orange-100 text-orange-700'
                            }`}
                          >
                            {api.status}
                          </span>
                        </div>
                      ))}
                    </div>
                  </div>

                  {/* è®°å½•é¢æ¿ */}
                  <div className="glass rounded-2xl p-6 shadow-xl">
                    <h3 className="text-lg font-bold mb-4 flex items-center">
                      <span className="mr-2">ğŸ“‹</span>æœ€æ–°è®°å½•
                    </h3>
                    <div className="text-center text-gray-500 py-8">
                      <div className="text-4xl mb-2">ğŸ“</div>
                      <p className="text-sm">æš‚æ— æ•°æ®è®°å½•</p>
                      <p className="text-xs mt-1">ç­‰å¾…åŠŸèƒ½ç»„ä»¶å®Œæˆ...</p>
                    </div>
                  </div>
                </div>
              </div>

              {/* ğŸ”¥ ç³»ç»Ÿä¿¡æ¯ */}
              <div className="glass rounded-2xl p-6 mt-8 shadow-xl">
                <div className="flex items-center justify-between">
                  <div>
                    <h3 className="text-lg font-bold text-gray-800 mb-2">
                      ğŸ”¥ ç³»ç»ŸåŠŸèƒ½ç‰¹æ€§
                    </h3>
                    <div className="grid md:grid-cols-2 gap-4 text-sm">
                      <div className="space-y-2">
                        <h4 className="font-semibold text-blue-600">
                          ğŸ“¡ æ•°æ®ä¸Šé“¾æ–¹å¼:
                        </h4>
                        <p>â€¢ 1ï¸âƒ£ ç›´æ¥è½¬è´¦ - ETHè½¬è´¦dataå­—æ®µ</p>
                        <p>â€¢ 2ï¸âƒ£ ä»£å¸è½¬è´¦ - USDTåˆçº¦è¯»å–</p>
                        <p>â€¢ ğŸ“ åˆçº¦å­˜å‚¨ - äº‹ä»¶æ—¥å¿—å½¢å¼</p>
                      </div>
                      <div className="space-y-2">
                        <h4 className="font-semibold text-green-600">
                          ğŸ” æ•°æ®è¯»å–æ–¹å¼:
                        </h4>
                        <p>â€¢ Ethers.js ç›´æ¥æŸ¥è¯¢</p>
                        <p>â€¢ Infura/Alchemy API</p>
                        <p>â€¢ The Graph å­å›¾æŸ¥è¯¢</p>
                      </div>
                    </div>
                  </div>

                  <div className="text-center">
                    <div className="text-4xl mb-2">ğŸ¯</div>
                    <p className="text-sm text-gray-600">Reactæ¶æ„</p>
                    <p className="text-sm font-bold text-blue-600">
                      æ¨¡å—åŒ–å¼€å‘
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )
      }

      // ğŸ“Š ä¾§è¾¹æ 
      function Sidebar({ stats, records }) {
        return (
          <div className="space-y-6">
            {/* ç»Ÿè®¡é¢æ¿ */}
            <div className="glass rounded-2xl p-6 shadow-xl">
              <h3 className="text-lg font-bold mb-4">ğŸ“Š å®æ—¶ç»Ÿè®¡</h3>
              <div className="grid grid-cols-2 gap-4">
                {[
                  {
                    label: 'ETHä½™é¢',
                    value: stats.ethBalance || '0.00',
                    icon: 'ğŸ’'
                  },
                  {
                    label: 'USDTä½™é¢',
                    value: stats.usdtBalance || '0.00',
                    icon: 'ğŸ’°'
                  },
                  { label: 'äº¤æ˜“æ¬¡æ•°', value: stats.tx || 0, icon: 'ğŸ“Š' },
                  { label: 'æ•°æ®è®°å½•', value: stats.data || 0, icon: 'ğŸ“‹' }
                ].map((stat) => (
                  <div
                    key={stat.label}
                    className="text-center p-4 bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl border border-blue-200"
                  >
                    <div className="text-2xl mb-1">{stat.icon}</div>
                    <div className="text-xl font-bold text-blue-600">
                      {stat.value}
                    </div>
                    <div className="text-xs text-gray-600">{stat.label}</div>
                  </div>
                ))}
              </div>
            </div>

            {/* APIçŠ¶æ€ */}
            <div className="glass rounded-2xl p-6 shadow-xl">
              <h3 className="text-lg font-bold mb-4">ğŸŒ APIçŠ¶æ€</h3>
              <div className="space-y-3">
                {[
                  { name: 'Ethers.js', status: 'å·²è¿æ¥', color: 'green' },
                  { name: 'BigNumber.js', status: 'å·²åŠ è½½', color: 'green' },
                  { name: 'The Graph', status: 'å·²è¿æ¥', color: 'green' },
                  { name: 'Infura API', status: 'éœ€é…ç½®', color: 'orange' },
                  { name: 'Alchemy API', status: 'éœ€é…ç½®', color: 'orange' }
                ].map((api) => (
                  <div key={api.name} className="flex justify-between">
                    <span className="text-sm">{api.name}</span>
                    <span
                      className={`px-3 py-1 rounded-full text-xs font-medium ${
                        api.color === 'green'
                          ? 'bg-green-100 text-green-700'
                          : 'bg-orange-100 text-orange-700'
                      }`}
                    >
                      {api.status}
                    </span>
                  </div>
                ))}
              </div>
            </div>

            {/* æœ€æ–°è®°å½• */}
            <div className="glass rounded-2xl p-6 shadow-xl">
              <h3 className="text-lg font-bold mb-4">ğŸ“‹ æœ€æ–°è®°å½•</h3>
              <div className="space-y-3 max-h-80 overflow-y-auto">
                {records.length === 0 ? (
                  <div className="text-center text-gray-500 py-8">
                    <div className="text-4xl mb-2">ğŸ“</div>
                    <p className="text-sm">æš‚æ— è®°å½•</p>
                    <p className="text-xs mt-1">å¼€å§‹ä½¿ç”¨åŠŸèƒ½åˆ›å»ºè®°å½•</p>
                  </div>
                ) : (
                  records.map((record, i) => (
                    <div
                      key={i}
                      className="bg-white border rounded-lg p-4 hover:shadow-md transition-all"
                    >
                      <div className="flex justify-between items-start mb-2">
                        <h4 className="font-semibold text-sm">{record.type}</h4>
                        <span className="text-xs text-gray-500">
                          {record.time}
                        </span>
                      </div>
                      <p className="text-xs text-gray-600 mb-2 truncate">
                        {record.data}
                      </p>
                      {record.amount && (
                        <p className="text-xs text-blue-600 font-medium mb-1">
                          {record.amount}
                        </p>
                      )}
                      <div className="flex justify-between text-xs">
                        <span>Gas: {record.gas?.toLocaleString()}</span>
                        <a
                          href={`https://sepolia.etherscan.io/tx/${record.hash}`}
                          target="_blank"
                          className="text-blue-500 hover:underline"
                        >
                          æŸ¥çœ‹ â†’
                        </a>
                      </div>
                    </div>
                  ))
                )}
              </div>
            </div>
          </div>
        )
      }
      // ğŸ‰ ä¸»åº”ç”¨ç»„ä»¶
      function BlockchainApp() {
        // çŠ¶æ€ç®¡ç†
        const [activeTab, setActiveTab] = useState('eth')
        const [wallet, setWallet] = useState({
          address: null,
          ensName: null,
          ensAvatar: null,
          ethBalance: '0.00',
          usdtBalance: '0.00'
        })
        const [records, setRecords] = useState([])
        const [stats, setStats] = useState({ tx: 0, data: 0 })
        const [contractAddress, setContractAddress] = useState('')
        const [progress, setProgress] = useState({
          show: false,
          title: '',
          step: 0
        })
        const [toast, setToast] = useState({
          show: false,
          message: '',
          type: 'info'
        })

        // æ§åˆ¶å‡½æ•°
        const showToast = (msg, type = 'info') =>
          setToast({ show: true, message: msg, type })
        const hideToast = () => setToast((prev) => ({ ...prev, show: false }))
        const showProgress = (title) =>
          setProgress({ show: true, title, step: 0 })
        const updateProgress = (step) =>
          setProgress((prev) => ({ ...prev, step }))
        const hideProgress = () =>
          setProgress({ show: false, title: '', step: 0 })

        // ğŸ”— é’±åŒ…è¿æ¥
        const connectWallet = async () => {
          if (typeof window.ethereum === 'undefined') {
            showToast('è¯·å®‰è£… MetaMask é’±åŒ…', 'error')
            return
          }

          try {
            showProgress('è¿æ¥é’±åŒ…ä¸­...')
            updateProgress(1)

            const accounts = await window.ethereum.request({
              method: 'eth_requestAccounts'
            })
            if (!accounts.length) throw new Error('ç”¨æˆ·æ‹’ç»è¿æ¥')

            const provider = new ethers.BrowserProvider(window.ethereum)
            const address = accounts[0]

            updateProgress(2)

            // æ£€æŸ¥ç½‘ç»œå¹¶åˆ‡æ¢åˆ°Sepolia
            const network = await provider.getNetwork()
            if (Number(network.chainId) !== 11155111) {
              try {
                await window.ethereum.request({
                  method: 'wallet_switchEthereumChain',
                  params: [{ chainId: '0xAA36A7' }]
                })
              } catch (e) {
                if (e.code === 4902) {
                  await window.ethereum.request({
                    method: 'wallet_addEthereumChain',
                    params: [
                      {
                        chainId: '0xAA36A7',
                        chainName: 'Sepoliaæµ‹è¯•ç½‘',
                        nativeCurrency: {
                          name: 'ETH',
                          symbol: 'ETH',
                          decimals: 18
                        },
                        rpcUrls: ['https://sepolia.infura.io/v3/'],
                        blockExplorerUrls: ['https://sepolia.etherscan.io/']
                      }
                    ]
                  })
                }
              }
            }

            updateProgress(3)

            // ENSæŸ¥è¯¢
            let ensName = null,
              ensAvatar = null
            try {
              const mainnetProvider = new ethers.JsonRpcProvider(
                'https://cloudflare-eth.com'
              )
              ensName = await mainnetProvider.lookupAddress(address)
              if (ensName) {
                const resolver = await mainnetProvider.getResolver(ensName)
                if (resolver) ensAvatar = await resolver.getAvatar()
              }
            } catch (e) {}

            // æŸ¥è¯¢ä½™é¢
            const ethBalance = await provider.getBalance(address)
            const ethFormatted = parseFloat(
              ethers.formatEther(ethBalance)
            ).toFixed(4)

            const USDT_ABI = [
              'function transfer(address to, uint256 amount) external returns (bool)',
              'function balanceOf(address account) external view returns (uint256)',
              'function decimals() external view returns (uint8)'
            ]
            // æŸ¥è¯¢USDTä½™é¢
            let usdtFormatted = '0.00'
            try {
              const usdtContract = new ethers.Contract(
                CONFIG.SEPOLIA_USDT,
                USDT_ABI,
                provider
              )
              const usdtBalance = await usdtContract.balanceOf(address)
              const decimals = await usdtContract.decimals()
              usdtFormatted = parseFloat(
                ethers.formatUnits(usdtBalance, decimals)
              ).toFixed(2)
            } catch (e) {
              console.log('USDTä½™é¢æŸ¥è¯¢å¤±è´¥:', e)
            }

            updateProgress(4)

            setWallet({
              address,
              ensName,
              ensAvatar,
              ethBalance: ethFormatted,
              usdtBalance: usdtFormatted
            })

            setTimeout(() => {
              hideProgress()
              const msg = ensName
                ? `âœ… æ¬¢è¿å›æ¥ï¼Œ${ensName}ï¼`
                : 'âœ… é’±åŒ…è¿æ¥æˆåŠŸï¼'
              showToast(msg, 'success')
            }, 500)
          } catch (error) {
            hideProgress()
            showToast('è¿æ¥å¤±è´¥: ' + error.message, 'error')
          }
        }

        const disconnectWallet = () => {
          setWallet({
            address: null,
            ensName: null,
            ensAvatar: null,
            ethBalance: '0.00',
            usdtBalance: '0.00'
          })
          setStats({ tx: 0, data: 0 })
          setRecords([])
          setContractAddress('')
          showToast('é’±åŒ…å·²æ–­å¼€', 'success')
        }

        // ğŸ¯ ç»Ÿä¸€äº¤æ˜“å¤„ç†
        const handleTransaction = async (type, params) => {
          if (!wallet.address && !['query', 'graph'].includes(type)) {
            showToast('è¯·å…ˆè¿æ¥é’±åŒ…', 'error')
            return
          }

          const titles = {
            eth: 'ETHè½¬è´¦ + æ•°æ®ä¸Šé“¾ä¸­...',
            token: 'ä»£å¸è½¬è´¦ä¸­...',
            contract: 'åˆçº¦æ•°æ®å†™å…¥ä¸­...',
            query: 'æŸ¥è¯¢æ•°æ®ä¸­...',
            graph: 'The GraphæŸ¥è¯¢ä¸­...'
          }

          showProgress(titles[type])

          try {
            // æ¨¡æ‹ŸåŒºå—é“¾å¤„ç†è¿‡ç¨‹
            for (let i = 1; i <= 4; i++) {
              await new Promise((r) => setTimeout(r, 1000))
              updateProgress(i)
            }

            // å¤„ç†æŸ¥è¯¢ç±»å‹
            if (['query', 'graph'].includes(type)) {
              const result =
                type === 'graph'
                  ? {
                      dataStoreds: [
                        {
                          id: '0x123abc',
                          user: wallet.address,
                          dataType: 'user_data',
                          timestamp: Math.floor(Date.now() / 1000),
                          blockNumber: '18500000',
                          transactionHash: '0xdef456789'
                        }
                      ],
                      transfers: [
                        {
                          id: '0x456def',
                          from: wallet.address,
                          to: params.target || '0x742d35Cc...',
                          value: '1000000',
                          timestamp: Math.floor(Date.now() / 1000),
                          blockNumber: '18500000'
                        }
                      ]
                    }
                  : {
                      type: 'transaction',
                      hash: params.target,
                      status: 'success',
                      blockNumber: '18500000',
                      gasUsed: '21000',
                      method: params.queryMethod
                    }

              setTimeout(() => {
                hideProgress()
                showToast('âœ… æŸ¥è¯¢å®Œæˆï¼', 'success')
              }, 500)

              return result
            }

            // ç”Ÿæˆäº¤æ˜“è®°å½•
            const mockHash =
              '0x' +
              Array.from({ length: 64 }, () =>
                Math.floor(Math.random() * 16).toString(16)
              ).join('')

            const typeLabels = {
              eth: 'ğŸ’° ETHè½¬è´¦',
              token: `ğŸª™ ${params.tokenType}è½¬è´¦`,
              contract: 'ğŸ“ åˆçº¦æ•°æ®'
            }

            const newRecord = {
              type: typeLabels[type],
              data: params.data || 'æ•°æ®å†…å®¹',
              hash: mockHash,
              amount: params.amount
                ? `${params.amount} ${
                    type === 'eth' ? 'ETH' : params.tokenType || ''
                  }`
                : undefined,
              time: new Date().toLocaleString(),
              gas: Math.floor(Math.random() * 80000 + 21000),
              contract: params.contractAddress
            }

            setRecords((prev) => [newRecord, ...prev.slice(0, 9)])
            setStats((prev) => ({ tx: prev.tx + 1, data: prev.data + 1 }))

            setTimeout(() => {
              hideProgress()
              showToast('âœ… æ“ä½œæˆåŠŸï¼', 'success')
            }, 500)
          } catch (error) {
            hideProgress()
            showToast('æ“ä½œå¤±è´¥: ' + error.message, 'error')
          }
        }

        // ğŸ—ï¸ åˆçº¦éƒ¨ç½²
        const deployContract = async () => {
          if (!wallet.address) {
            showToast('è¯·å…ˆè¿æ¥é’±åŒ…', 'error')
            return null
          }

          showProgress('éƒ¨ç½²DataStorageåˆçº¦åˆ°Sepolia...')

          try {
            for (let i = 1; i <= 4; i++) {
              await new Promise((r) => setTimeout(r, 1200))
              updateProgress(i)
            }

            const mockAddress =
              '0x' +
              Array.from({ length: 40 }, () =>
                Math.floor(Math.random() * 16).toString(16)
              ).join('')

            setTimeout(() => {
              hideProgress()
              showToast('âœ… åˆçº¦éƒ¨ç½²æˆåŠŸï¼', 'success')
            }, 500)

            return mockAddress
          } catch (error) {
            hideProgress()
            showToast('éƒ¨ç½²å¤±è´¥: ' + error.message, 'error')
            return null
          }
        }

        return (
          <div className="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-800">
            <Toast {...toast} onHide={hideToast} />
            <Progress {...progress} onHide={hideProgress} />

            <div className="container mx-auto p-6 max-w-7xl">
              {/* ğŸ¯ å¤´éƒ¨ */}
              <Header
                wallet={wallet}
                onConnect={connectWallet}
                onDisconnect={disconnectWallet}
              />

              <div className="grid lg:grid-cols-3 gap-8">
                {/* ğŸš€ ä¸»åŠŸèƒ½åŒº */}
                <div className="lg:col-span-2">
                  <div className="glass rounded-2xl p-8 shadow-2xl">
                    <h2 className="text-xl font-bold mb-6 flex items-center">
                      <span className="mr-3">ğŸš€</span>æ•°æ®ä¸Šé“¾æ“ä½œä¸­å¿ƒ
                    </h2>

                    {/* æ ‡ç­¾é¡µå¯¼èˆª */}
                    <div className="flex mb-6 bg-gray-100 p-1 rounded-xl">
                      {[
                        {
                          id: 'eth',
                          label: 'ğŸ’° ETHè½¬è´¦',
                          desc: 'Ethers.jsæ–¹å¼1'
                        },
                        {
                          id: 'token',
                          label: 'ğŸª™ ä»£å¸è½¬è´¦',
                          desc: 'USDTåˆçº¦æ–¹å¼2'
                        },
                        {
                          id: 'contract',
                          label: 'ğŸ“ åˆçº¦å­˜å‚¨',
                          desc: 'äº‹ä»¶æ—¥å¿—å­˜å‚¨'
                        },
                        {
                          id: 'query',
                          label: 'ğŸ” æ•°æ®æŸ¥è¯¢',
                          desc: 'The GraphæŸ¥è¯¢'
                        }
                      ].map((tab) => (
                        <button
                          key={tab.id}
                          onClick={() => setActiveTab(tab.id)}
                          className={`flex-1 py-3 px-4 rounded-lg font-medium transition-all text-center ${
                            activeTab === tab.id
                              ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg transform -translate-y-1'
                              : 'text-gray-600 hover:bg-white hover:shadow-sm'
                          }`}
                        >
                          <div className="font-semibold">{tab.label}</div>
                          <div className="text-xs opacity-75">{tab.desc}</div>
                        </button>
                      ))}
                    </div>

                    {/* æ ‡ç­¾é¡µå†…å®¹ */}
                    {activeTab === 'eth' && (
                      <EthTransfer onTransaction={handleTransaction} />
                    )}
                    {activeTab === 'token' && (
                      <TokenTransfer onTransaction={handleTransaction} />
                    )}
                    {activeTab === 'contract' && (
                      <ContractStorage
                        contractAddress={contractAddress}
                        setContractAddress={setContractAddress}
                        onTransaction={handleTransaction}
                        onDeploy={deployContract}
                      />
                    )}
                    {activeTab === 'query' && (
                      <DataQuery onQuery={handleTransaction} />
                    )}
                  </div>
                </div>

                {/* ğŸ“Š ä¾§è¾¹æ  */}
                <Sidebar stats={{ ...stats, ...wallet }} records={records} />
              </div>
            </div>
          </div>
        )
      }

      // ğŸ¯ å¤´éƒ¨ç»„ä»¶
      function Header({ wallet, onConnect, onDisconnect }) {
        return (
          <div className="glass rounded-2xl p-6 mb-8 shadow-2xl">
            <div className="flex justify-between items-center flex-wrap gap-4">
              <div className="flex items-center">
                <span className="text-3xl mr-3">â›“ï¸</span>
                <div>
                  <h1 className="text-2xl font-bold text-gray-800">
                    åŒºå—é“¾æ•°æ®ä¸Šé“¾ç³»ç»Ÿ
                  </h1>
                  <p className="text-sm text-gray-600">
                    2ç§æ–¹å¼ä¸Šé“¾ | ENSæ”¯æŒ | The GraphæŸ¥è¯¢ | 18ä½å°æ•°ç²¾åº¦
                  </p>
                </div>
              </div>

              <div className="flex items-center gap-4">
                <div className="flex items-center bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm">
                  <div className="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></div>
                  Sepolia æµ‹è¯•ç½‘
                </div>
                <WalletButton
                  {...wallet}
                  onConnect={onConnect}
                  onDisconnect={onDisconnect}
                />
              </div>
            </div>
          </div>
        )
      }

      // ğŸ‘› é’±åŒ…æŒ‰é’®ç»„ä»¶
      function WalletButton({
        address,
        ensName,
        ensAvatar,
        ethBalance,
        usdtBalance,
        onConnect,
        onDisconnect
      }) {
        if (!address) {
          return (
            <button
              onClick={onConnect}
              className="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transition-all hover:-translate-y-1"
            >
              ğŸ‘› è¿æ¥é’±åŒ…
            </button>
          )
        }

        const displayName =
          ensName || `${address.slice(0, 6)}...${address.slice(-4)}`

        return (
          <div className="flex items-center gap-3">
            <div className="flex items-center gap-3 bg-white bg-opacity-20 rounded-xl px-4 py-2">
              <div className="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold">
                {ensAvatar ? (
                  <img
                    src={ensAvatar}
                    alt="ENS"
                    className="w-full h-full rounded-full object-cover"
                  />
                ) : (
                  displayName.charAt(0).toUpperCase()
                )}
              </div>
              <div>
                <div className="font-semibold text-white flex items-center">
                  {displayName}
                  {ensName && (
                    <span className="ml-1 text-xs bg-blue-400 px-2 py-0.5 rounded-full">
                      .eth
                    </span>
                  )}
                </div>
                <div className="text-xs text-blue-100">
                  {ethBalance} ETH | {usdtBalance} USDT
                </div>
              </div>
            </div>
            <button
              onClick={onDisconnect}
              className="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors"
            >
              æ–­å¼€
            </button>
          </div>
        )
      }

      // ğŸ Toastç»„ä»¶
      function Toast({ message, type, show, onHide }) {
        useEffect(() => {
          if (show) {
            const timer = setTimeout(onHide, 3500)
            return () => clearTimeout(timer)
          }
        }, [show, onHide])

        if (!show) return null

        const styles = {
          success: 'bg-green-50 border-green-500 text-green-800',
          error: 'bg-red-50 border-red-500 text-red-800',
          info: 'bg-blue-50 border-blue-500 text-blue-800'
        }

        const icons = { success: 'âœ…', error: 'âŒ', info: 'â„¹ï¸' }

        return (
          <div
            className={`fixed top-4 right-4 ${styles[type]} border-l-4 p-4 rounded-lg shadow-lg z-50 max-w-sm animate-slide-in`}
          >
            <div className="flex justify-between items-start">
              <div className="flex items-center">
                <span className="mr-2">{icons[type]}</span>
                <span className="text-sm font-medium">{message}</span>
              </div>
              <button
                onClick={onHide}
                className="ml-4 text-gray-400 hover:text-gray-600"
              >
                Ã—
              </button>
            </div>
          </div>
        )
      }

      // â³ è¿›åº¦æ¡ç»„ä»¶
      function Progress({ show, title, step, onHide }) {
        if (!show) return null

        const steps = ['ğŸ”„ åˆå§‹åŒ–', 'âœ… éªŒè¯å‚æ•°', 'ğŸ“¡ å¹¿æ’­äº¤æ˜“', 'ğŸ‰ ç¡®è®¤å®Œæˆ']
        const progress = (step / 4) * 100

        return (
          <div className="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50">
            <div className="glass rounded-2xl p-8 min-w-96 relative">
              <button
                onClick={onHide}
                className="absolute top-4 right-4 text-gray-400 hover:text-gray-600 text-xl"
              >
                Ã—
              </button>
              <h3 className="text-xl font-bold text-center mb-6">{title}</h3>

              <div className="w-full bg-gray-200 rounded-full h-4 mb-6">
                <div
                  className="bg-gradient-to-r from-blue-500 to-purple-600 h-4 rounded-full transition-all duration-500 flex items-center justify-center"
                  style={{ width: `${progress}%` }}
                >
                  {progress > 15 && (
                    <span className="text-white text-xs font-bold">
                      {Math.round(progress)}%
                    </span>
                  )}
                </div>
              </div>

              <div className="space-y-3">
                {steps.map((text, i) => (
                  <div
                    key={i}
                    className={`flex items-center p-3 rounded-lg transition-all ${
                      i < step
                        ? 'bg-green-50 border-l-4 border-green-500'
                        : i === step
                        ? 'bg-blue-50 border-l-4 border-blue-500'
                        : 'bg-gray-50'
                    }`}
                  >
                    <div
                      className={`w-6 h-6 rounded-full flex items-center justify-center text-sm font-bold mr-3 ${
                        i < step
                          ? 'bg-green-500 text-white'
                          : i === step
                          ? 'bg-blue-500 text-white animate-pulse'
                          : 'bg-gray-300'
                      }`}
                    >
                      {i < step ? 'âœ“' : i + 1}
                    </div>
                    <span>{text}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )
      }

      // ğŸ’° ETHè½¬è´¦ç»„ä»¶
      function EthTransfer({ onTransaction }) {
        const [form, setForm] = useState({
          address: '0x742d35Cc6634C0532925a3b8D6E14a87B8F0E652',
          amount: '0.001',
          data:
            '{"user": "alice", "action": "register", "timestamp": ' +
            Date.now() +
            '}'
        })
        const [loading, setLoading] = useState(false)

        const handleSubmit = async (e) => {
          e.preventDefault()

          if (!ethers.isAddress(form.address)) {
            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„åœ°å€')
            return
          }

          try {
            JSON.parse(form.data)
          } catch {
            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„JSONæ•°æ®')
            return
          }

          setLoading(true)
          try {
            await onTransaction('eth', form)
            setForm((prev) => ({
              ...prev,
              data:
                '{"user": "alice", "action": "register", "timestamp": ' +
                Date.now() +
                '}'
            }))
          } finally {
            setLoading(false)
          }
        }

        return (
          <div className="bg-blue-50 border border-blue-200 rounded-xl p-6">
            <div className="flex items-center mb-4">
              <span className="text-2xl mr-3">ğŸ’°</span>
              <div>
                <h3 className="text-lg font-bold text-blue-900">
                  ETHè½¬è´¦æ•°æ®ä¸Šé“¾
                </h3>
                <p className="text-blue-700 text-sm">
                  æ–¹å¼1: ä½¿ç”¨Ethers.jsåœ¨dataå­—æ®µåµŒå…¥æ•°æ®
                </p>
              </div>
            </div>

            <form onSubmit={handleSubmit} className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-2">
                  ğŸ“ æ¥æ”¶åœ°å€
                </label>
                <input
                  type="text"
                  value={form.address}
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, address: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 outline-none font-mono text-sm"
                  required
                />
              </div>

              <div>
                <label className="block text-sm font-medium mb-2">
                  ğŸ’ é‡‘é¢ (ETH)
                </label>
                <input
                  type="number"
                  value={form.amount}
                  step="0.0001"
                  min="0"
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, amount: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 outline-none"
                  required
                />
                <p className="text-xs text-gray-500 mt-1">
                  ğŸ’¡ BigNumber.jså¤„ç†18ä½ç²¾åº¦
                </p>
              </div>

              <div>
                <label className="block text-sm font-medium mb-2">
                  ğŸ“„ ä¸Šé“¾æ•°æ® (JSON)
                </label>
                <textarea
                  value={form.data}
                  rows="4"
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, data: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 outline-none resize-none font-mono text-sm"
                  required
                />
                <p className="text-xs text-gray-500 mt-1">
                  â„¹ï¸ æ•°æ®ç¼–ç åˆ°äº¤æ˜“dataå­—æ®µ
                </p>
              </div>

              <button
                type="submit"
                disabled={loading}
                className={`w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 px-6 rounded-lg font-semibold transition-all ${
                  loading
                    ? 'opacity-50 cursor-not-allowed'
                    : 'hover:shadow-xl hover:-translate-y-2'
                }`}
              >
                {loading ? (
                  <div className="flex items-center justify-center">
                    <div className="animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"></div>
                    å¤„ç†ä¸­...
                  </div>
                ) : (
                  <>ğŸš€ å‘é€ETHè½¬è´¦ä¸Šé“¾</>
                )}
              </button>
            </form>
          </div>
        )
      }
      // ğŸª™ ä»£å¸è½¬è´¦ç»„ä»¶
      function TokenTransfer({ onTransaction }) {
        const [form, setForm] = useState({
          tokenType: 'USDT',
          address: '0x742d35Cc6634C0532925a3b8D6E14a87B8F0E652',
          amount: '1.0',
          data:
            '{"payment_type": "service_fee", "order_id": "ORD' +
            Date.now() +
            '"}'
        })
        const [loading, setLoading] = useState(false)
        const [tokenBalance, setTokenBalance] = useState('0.00')
        const [gasEstimate, setGasEstimate] = useState(null)
        const [contractInfo, setContractInfo] = useState(null)

        // ä»£å¸åˆçº¦é…ç½® - Sepoliaæµ‹è¯•ç½‘
        const TOKEN_CONTRACTS = {
          USDT: {
            address: '0x7169D38820dfd117C3FA1f22a697dBA58d90BA06',
            decimals: 6,
            name: 'Tether USD (Sepolia)',
            symbol: 'USDT'
          },
          USDC: {
            address: '0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238',
            decimals: 6,
            name: 'USD Coin (Sepolia)',
            symbol: 'USDC'
          },
          DAI: {
            address: '0x3e622317f8C93f7328350cF0B56d9eD4C620C5d6',
            decimals: 18,
            name: 'Dai Stablecoin (Sepolia)',
            symbol: 'DAI'
          }
        }

        const USDT_ABI = [
          'function transfer(address to, uint256 amount) external returns (bool)',
          'function balanceOf(address account) external view returns (uint256)',
          'function decimals() external view returns (uint8)',
          'function symbol() external view returns (string)',
          'function name() external view returns (string)'
        ]

        // æŸ¥è¯¢ä»£å¸ä½™é¢å’Œåˆçº¦ä¿¡æ¯
        useEffect(() => {
          const fetchTokenInfo = async () => {
            if (window.ethereum) {
              try {
                const provider = new ethers.BrowserProvider(window.ethereum)
                const accounts = await provider.send('eth_accounts', [])

                if (accounts.length > 0) {
                  const tokenConfig = TOKEN_CONTRACTS[form.tokenType]
                  const contract = new ethers.Contract(
                    tokenConfig.address,
                    USDT_ABI,
                    provider
                  )

                  // æŸ¥è¯¢ä½™é¢
                  const balance = await contract.balanceOf(accounts[0])
                  const formatted = parseFloat(
                    ethers.formatUnits(balance, tokenConfig.decimals)
                  ).toFixed(2)
                  setTokenBalance(formatted)

                  // æŸ¥è¯¢åˆçº¦ä¿¡æ¯
                  const [name, symbol, decimals] = await Promise.all([
                    contract.name(),
                    contract.symbol(),
                    contract.decimals()
                  ])

                  setContractInfo({
                    name,
                    symbol,
                    decimals: Number(decimals),
                    address: tokenConfig.address
                  })
                }
              } catch (e) {
                console.log('ä»£å¸ä¿¡æ¯æŸ¥è¯¢å¤±è´¥:', e)
                setTokenBalance('0.00')
              }
            }
          }

          fetchTokenInfo()
        }, [form.tokenType])

        // Gasä¼°ç®—
        useEffect(() => {
          const estimateGas = async () => {
            if (form.address && form.amount && window.ethereum) {
              try {
                const provider = new ethers.BrowserProvider(window.ethereum)
                const tokenConfig = TOKEN_CONTRACTS[form.tokenType]
                const contract = new ethers.Contract(
                  tokenConfig.address,
                  USDT_ABI,
                  provider
                )

                const amountBN = new BigNumber(form.amount)
                const amountWei = ethers.parseUnits(
                  amountBN.toString(),
                  tokenConfig.decimals
                )

                const gasEstimate = await contract.transfer.estimateGas(
                  form.address,
                  amountWei
                )
                setGasEstimate(gasEstimate.toString())
              } catch (e) {
                setGasEstimate('65000') // ERC20è½¬è´¦é»˜è®¤gas
              }
            }
          }

          const debounce = setTimeout(estimateGas, 500)
          return () => clearTimeout(debounce)
        }, [form.address, form.amount, form.tokenType])

        const handleSubmit = async (e) => {
          e.preventDefault()

          // éªŒè¯è¾“å…¥
          if (!ethers.isAddress(form.address)) {
            alert('âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„ä»¥å¤ªåŠåœ°å€')
            return
          }

          if (parseFloat(form.amount) <= 0) {
            alert('âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„è½¬è´¦é‡‘é¢')
            return
          }

          if (parseFloat(tokenBalance) < parseFloat(form.amount)) {
            alert(`âŒ ${form.tokenType}ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢: ${tokenBalance}`)
            return
          }

          setLoading(true)
          try {
            await onTransaction('token', {
              ...form,
              contractAddress: TOKEN_CONTRACTS[form.tokenType].address,
              decimals: TOKEN_CONTRACTS[form.tokenType].decimals
            })
          } finally {
            setLoading(false)
          }
        }

        return (
          <div className="bg-purple-50 border border-purple-200 rounded-xl p-6">
            <div className="flex items-center mb-4">
              <span className="text-2xl mr-3">ğŸª™</span>
              <div>
                <h3 className="text-lg font-bold text-purple-900">
                  ä»£å¸è½¬è´¦æ•°æ®ä¸Šé“¾
                </h3>
                <p className="text-purple-700 text-sm">
                  <strong>æ–¹å¼2:</strong>{' '}
                  é€šè¿‡è½¬Uçš„å½¢å¼è¯»å–USDTåˆçº¦åœ°å€+é“¾çš„æ•°æ®HASH/ID
                </p>
              </div>
            </div>

            <form onSubmit={handleSubmit} className="space-y-5">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ğŸª™ ä»£å¸ç±»å‹
                </label>
                <select
                  value={form.tokenType}
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, tokenType: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all"
                >
                  <option value="USDT">ğŸ’° USDT (Tether) - ä¸»è¦æ”¯æŒ</option>
                  <option value="USDC">ğŸ’µ USDC (USD Coin)</option>
                  <option value="DAI">ğŸŒŸ DAI (MakerDAO)</option>
                </select>

                {/* ä»£å¸åˆçº¦ä¿¡æ¯æ˜¾ç¤º */}
                {contractInfo && (
                  <div className="mt-2 p-3 bg-purple-100 border border-purple-300 rounded-lg">
                    <div className="text-xs space-y-1">
                      <p>
                        <strong>åˆçº¦:</strong>{' '}
                        <span className="font-mono">
                          {contractInfo.address}
                        </span>
                      </p>
                      <p>
                        <strong>åç§°:</strong> {contractInfo.name}
                      </p>
                      <p>
                        <strong>ç²¾åº¦:</strong> {contractInfo.decimals} ä½å°æ•°
                      </p>
                      <p>
                        <strong>ä½™é¢:</strong>{' '}
                        <span className="font-bold text-purple-700">
                          {tokenBalance} {contractInfo.symbol}
                        </span>
                      </p>
                    </div>
                  </div>
                )}
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ğŸ“ æ¥æ”¶åœ°å€
                </label>
                <input
                  type="text"
                  value={form.address}
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, address: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none font-mono text-sm transition-all"
                  placeholder="0x..."
                  required
                />
                <p className="text-xs text-gray-500 mt-1">ğŸ” æ”¯æŒENSåŸŸåè§£æ</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ğŸ’° è½¬è´¦é‡‘é¢
                </label>
                <div className="relative">
                  <input
                    type="number"
                    value={form.amount}
                    step="0.01"
                    min="0"
                    max={tokenBalance}
                    onChange={(e) =>
                      setForm((prev) => ({ ...prev, amount: e.target.value }))
                    }
                    className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none transition-all pr-20"
                    placeholder="1.0"
                    required
                  />
                  <div className="absolute inset-y-0 right-0 flex items-center pr-3">
                    <span className="text-gray-500 text-sm font-medium">
                      {form.tokenType}
                    </span>
                  </div>
                </div>
                <div className="flex justify-between items-center mt-1">
                  <p className="text-xs text-gray-500">
                    ğŸ’¡ BigNumber.jså¤„ç†ä»£å¸ç²¾åº¦
                  </p>
                  <p className="text-xs text-purple-600">
                    ä½™é¢: {tokenBalance} {form.tokenType}
                  </p>
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ğŸ“„ å…³è”æ•°æ® (JSONæ ¼å¼ï¼Œå¯é€‰)
                </label>
                <textarea
                  value={form.data}
                  rows="3"
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, data: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none font-mono text-sm transition-all"
                  placeholder='{"payment_type": "service_fee", "order_id": "12345"}'
                />
                <p className="text-xs text-gray-500 mt-1">
                  â„¹ï¸ é€šè¿‡è½¬è´¦äº‹ä»¶å…³è”æ•°æ®ï¼Œä¾¿äºè¿½è¸ª
                </p>
              </div>

              {/* Gasä¼°ç®—æ˜¾ç¤º */}
              {gasEstimate && (
                <div className="bg-purple-100 border border-purple-300 rounded-lg p-3">
                  <div className="flex justify-between items-center text-sm">
                    <span className="text-purple-700">â›½ é¢„ä¼°Gas:</span>
                    <span className="font-mono font-bold text-purple-800">
                      {parseInt(gasEstimate).toLocaleString()}
                    </span>
                  </div>
                  <div className="flex justify-between items-center text-xs text-purple-600 mt-1">
                    <span>é¢„ä¼°è´¹ç”¨ (ETH):</span>
                    <span>~0.003 ETH</span>
                  </div>
                </div>
              )}

              <button
                type="submit"
                disabled={loading}
                className={`w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-4 px-6 rounded-lg font-semibold transition-all duration-300 ${
                  loading
                    ? 'opacity-50 cursor-not-allowed'
                    : 'hover:shadow-xl hover:-translate-y-2 active:translate-y-0 transform'
                }`}
              >
                {loading ? (
                  <div className="flex items-center justify-center">
                    <div className="animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"></div>
                    <span>è½¬è´¦ä¸­...</span>
                  </div>
                ) : (
                  <div className="flex items-center justify-center">
                    <span className="mr-2">ğŸ’¸</span>
                    <span>å‘é€ {form.tokenType} è½¬è´¦</span>
                  </div>
                )}
              </button>
            </form>

            {/* åŠŸèƒ½è¯´æ˜ */}
            <div className="mt-6 bg-purple-100 border border-purple-300 rounded-lg p-4">
              <h4 className="font-semibold text-purple-900 mb-2">
                ğŸ¯ ä»£å¸è½¬è´¦ä¸Šé“¾åŸç†
              </h4>
              <div className="text-sm text-purple-800 space-y-1">
                <p>â€¢ ğŸª™ é€šè¿‡USDTç­‰ERC20ä»£å¸åˆçº¦è½¬è´¦</p>
                <p>â€¢ ğŸ”— è¯»å–åˆçº¦åœ°å€å’Œäº¤æ˜“HASH/ID</p>
                <p>â€¢ ğŸ“Š æ”¯æŒInfura/Alchemy APIæŸ¥è¯¢</p>
                <p>â€¢ ğŸ’¾ å…³è”æ•°æ®é€šè¿‡äº‹ä»¶ç´¢å¼•</p>
                <p>â€¢ ğŸ¯ ä¸“é—¨ç”¨äºæ˜¨å¤©éƒ¨ç½²çš„å­å›¾æŸ¥è¯¢</p>
              </div>
            </div>
          </div>
        )
      }
      // ğŸ“Š ETHè½¬è´¦å¤„ç†é€»è¾‘
      async function handleEthTransfer(
        params,
        wallet,
        showProgress,
        updateProgress,
        hideProgress,
        showToast
      ) {
        if (!wallet.address) {
          showToast('è¯·å…ˆè¿æ¥é’±åŒ…', 'error')
          return null
        }

        try {
          showProgress('ETHè½¬è´¦ + æ•°æ®ä¸Šé“¾ä¸­...')
          updateProgress(1)

          const provider = new ethers.BrowserProvider(window.ethereum)
          const signer = await provider.getSigner()

          // ä½¿ç”¨BigNumber.jså¤„ç†ç²¾åº¦
          const amountBN = new BigNumber(params.amount)
          const amountWei = ethers.parseEther(amountBN.toString())

          updateProgress(2)

          // æ£€æŸ¥ä½™é¢
          const balance = await provider.getBalance(wallet.address)
          const gasEstimate = ethers.parseEther('0.002') // é¢„ç•™gasè´¹ç”¨

          if (balance < amountWei + gasEstimate) {
            throw new Error('ETHä½™é¢ä¸è¶³ï¼Œè¯·ç¡®ä¿æœ‰è¶³å¤Ÿçš„Gasè´¹ç”¨')
          }

          // ç¼–ç æ•°æ®
          const encodedData = ethers.hexlify(ethers.toUtf8Bytes(params.data))

          // ä¼°ç®—ç²¾ç¡®çš„Gas
          const gasLimit = await provider.estimateGas({
            to: params.address,
            value: amountWei,
            data: encodedData
          })

          updateProgress(3)

          // å‘é€äº¤æ˜“
          const tx = await signer.sendTransaction({
            to: params.address,
            value: amountWei,
            data: encodedData,
            gasLimit: (gasLimit * 120n) / 100n // å¢åŠ 20%ç¼“å†²
          })

          console.log('ğŸš€ ETHè½¬è´¦äº¤æ˜“å·²å‘é€:', tx.hash)

          // ç­‰å¾…ç¡®è®¤
          const receipt = await tx.wait()
          updateProgress(4)

          console.log('âœ… ETHè½¬è´¦ç¡®è®¤:', receipt)

          return {
            hash: tx.hash,
            blockNumber: receipt.blockNumber.toString(),
            gasUsed: receipt.gasUsed.toString(),
            data: params.data,
            amount: params.amount,
            type: 'eth_transfer'
          }
        } catch (error) {
          console.error('âŒ ETHè½¬è´¦å¤±è´¥:', error)
          throw error
        }
      }
      // ğŸ”„ ä»£å¸è½¬è´¦å¤„ç†é€»è¾‘
      async function handleTokenTransfer(
        params,
        wallet,
        showProgress,
        updateProgress,
        hideProgress,
        showToast
      ) {
        if (!wallet.address) {
          showToast('è¯·å…ˆè¿æ¥é’±åŒ…', 'error')
          return null
        }

        try {
          showProgress('ä»£å¸è½¬è´¦ + æ•°æ®è®°å½•ä¸­...')
          updateProgress(1)

          const provider = new ethers.BrowserProvider(window.ethereum)
          const signer = await provider.getSigner()

          // åˆ›å»ºä»£å¸åˆçº¦å®ä¾‹
          const USDT_ABI = [
            'function transfer(address to, uint256 amount) external returns (bool)',
            'function balanceOf(address account) external view returns (uint256)',
            'function decimals() external view returns (uint8)'
          ]

          const contract = new ethers.Contract(
            params.contractAddress,
            USDT_ABI,
            signer
          )

          updateProgress(2)

          // ä½¿ç”¨BigNumber.jså¤„ç†é‡‘é¢ç²¾åº¦
          const amountBN = new BigNumber(params.amount)
          const amountWei = ethers.parseUnits(
            amountBN.toString(),
            params.decimals
          )

          // æ£€æŸ¥ä»£å¸ä½™é¢
          const balance = await contract.balanceOf(wallet.address)
          if (balance < amountWei) {
            throw new Error(`${params.tokenType}ä½™é¢ä¸è¶³`)
          }

          // ä¼°ç®—Gas
          const gasLimit = await contract.transfer.estimateGas(
            params.address,
            amountWei
          )

          updateProgress(3)

          // å‘é€ä»£å¸è½¬è´¦
          const tx = await contract.transfer(params.address, amountWei, {
            gasLimit: (gasLimit * 120n) / 100n // å¢åŠ 20%ç¼“å†²
          })

          console.log('ğŸª™ ä»£å¸è½¬è´¦äº¤æ˜“å·²å‘é€:', tx.hash)
          console.log('ğŸ“Š åˆçº¦åœ°å€:', params.contractAddress)

          // ç­‰å¾…ç¡®è®¤
          const receipt = await tx.wait()
          updateProgress(4)

          console.log('âœ… ä»£å¸è½¬è´¦ç¡®è®¤:', receipt)

          return {
            hash: tx.hash,
            blockNumber: receipt.blockNumber.toString(),
            gasUsed: receipt.gasUsed.toString(),
            data: params.data,
            amount: params.amount,
            tokenType: params.tokenType,
            contractAddress: params.contractAddress,
            type: 'token_transfer'
          }
        } catch (error) {
          console.error('âŒ ä»£å¸è½¬è´¦å¤±è´¥:', error)
          throw error
        }
      }

      // ğŸ“ˆ ä»£å¸è½¬è´¦ç»Ÿè®¡ä¿¡æ¯
      const TOKEN_TRANSFER_INFO = {
        title: 'ğŸª™ ä»£å¸è½¬è´¦æ•°æ®ä¸Šé“¾',
        method: 'ERC20 Contract + Event Logs',
        supportedTokens: ['USDT', 'USDC', 'DAI'],
        advantages: [
          'ğŸ¯ ç›´æ¥ä¸æ˜¨å¤©éƒ¨ç½²çš„å­å›¾é›†æˆ',
          'ğŸ’° é€šè¿‡ä»£å¸è½¬è´¦å…³è”æ•°æ®',
          'ğŸ” The Graphè‡ªåŠ¨ç´¢å¼•äº¤æ˜“',
          'ğŸ“Š æ”¯æŒå¤æ‚æŸ¥è¯¢å’Œè¿‡æ»¤',
          'âš¡ æŸ¥è¯¢é€Ÿåº¦æ›´å¿«'
        ],
        theGraphIntegration: {
          endpoint:
            'https://api.thegraph.com/subgraphs/name/limuran/usdt-data-tracker',
          features: [
            'ğŸ“ˆ å®æ—¶ç´¢å¼•USDTè½¬è´¦',
            'ğŸ” GraphQLæŸ¥è¯¢æ¥å£',
            'ğŸ“Š æ•°æ®èšåˆå’Œåˆ†æ',
            'ğŸ¯ ä¸åˆçº¦äº‹ä»¶åŒæ­¥'
          ]
        }
      }

      // ğŸ“ æ™ºèƒ½åˆçº¦æ•°æ®å­˜å‚¨ç»„ä»¶ - é€šè¿‡æ—¥å¿—å½¢å¼å­˜å‚¨æ•°æ®ï¼ˆéƒ¨ç½²åˆ°æµ‹è¯•é“¾ï¼‰
      function ContractStorage({
        contractAddress,
        setContractAddress,
        onTransaction,
        onDeploy
      }) {
        const [form, setForm] = useState({
          dataType: 'user_data',
          data:
            '{"name": "Bob", "email": "bob@example.com", "verified": true, "timestamp": ' +
            Date.now() +
            '}'
        })
        const [loading, setLoading] = useState(false)
        const [deploying, setDeploying] = useState(false)
        const [contractInfo, setContractInfo] = useState(null)

        // æ•°æ®å­˜å‚¨åˆçº¦ABI
        const DATA_STORAGE_ABI = [
          'function storeData(string memory dataType, string memory data) external',
          'function getData(address user, uint256 index) external view returns (string memory dataType, string memory data, uint256 timestamp)',
          'function getUserDataCount(address user) external view returns (uint256)',
          'event DataStored(address indexed user, string indexed dataType, bytes32 dataHash, string data, uint256 timestamp)'
        ]

        // æ£€æŸ¥åˆçº¦çŠ¶æ€
        useEffect(() => {
          const checkContract = async () => {
            if (contractAddress && window.ethereum) {
              try {
                const provider = new ethers.BrowserProvider(window.ethereum)
                const code = await provider.getCode(contractAddress)
                const isContract = code !== '0x'

                if (isContract) {
                  const contract = new ethers.Contract(
                    contractAddress,
                    DATA_STORAGE_ABI,
                    provider
                  )
                  const accounts = await provider.send('eth_accounts', [])

                  if (accounts.length > 0) {
                    const dataCount = await contract.getUserDataCount(
                      accounts[0]
                    )
                    setContractInfo({
                      isValid: true,
                      userDataCount: Number(dataCount),
                      address: contractAddress
                    })
                  }
                } else {
                  setContractInfo({ isValid: false, error: 'åœ°å€ä¸æ˜¯æ™ºèƒ½åˆçº¦' })
                }
              } catch (e) {
                setContractInfo({ isValid: false, error: 'åˆçº¦éªŒè¯å¤±è´¥' })
              }
            }
          }

          if (contractAddress) checkContract()
        }, [contractAddress])

        const handleDeploy = async () => {
          setDeploying(true)
          try {
            const address = await onDeploy()
            if (address) setContractAddress(address)
          } finally {
            setDeploying(false)
          }
        }

        const handleSubmit = async (e) => {
          e.preventDefault()

          if (!contractAddress) {
            alert('âŒ è¯·å…ˆéƒ¨ç½²åˆçº¦æˆ–è¾“å…¥åˆçº¦åœ°å€')
            return
          }

          try {
            JSON.parse(form.data)
          } catch {
            alert('âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„JSONæ•°æ®')
            return
          }

          setLoading(true)
          try {
            await onTransaction('contract', { ...form, contractAddress })
          } finally {
            setLoading(false)
          }
        }

        return (
          <div className="bg-green-50 border border-green-200 rounded-xl p-6">
            <div className="flex items-center mb-4">
              <span className="text-2xl mr-3">ğŸ“</span>
              <div>
                <h3 className="text-lg font-bold text-green-900">
                  æ™ºèƒ½åˆçº¦æ•°æ®å­˜å‚¨
                </h3>
                <p className="text-green-700 text-sm">
                  é€šè¿‡ä¸“ç”¨åˆçº¦ä»¥<strong>äº‹ä»¶æ—¥å¿—å½¢å¼</strong>
                  æ°¸ä¹…å­˜å‚¨æ•°æ®ï¼ˆéƒ¨ç½²åˆ°Sepoliaæµ‹è¯•é“¾ï¼‰
                </p>
              </div>
            </div>

            <div className="space-y-5">
              {/* åˆçº¦éƒ¨ç½²/åœ°å€ */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ğŸ—ï¸ æ•°æ®å­˜å‚¨åˆçº¦
                </label>
                <div className="flex gap-2">
                  <input
                    type="text"
                    value={contractAddress}
                    onChange={(e) => setContractAddress(e.target.value)}
                    className="flex-1 p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 outline-none font-mono text-sm"
                    placeholder="0x... æˆ–ç‚¹å‡»éƒ¨ç½²"
                  />
                  <button
                    type="button"
                    onClick={handleDeploy}
                    disabled={deploying}
                    className={`bg-green-500 text-white px-6 py-3 rounded-lg font-semibold transition-all ${
                      deploying
                        ? 'opacity-50'
                        : 'hover:bg-green-600 hover:shadow-lg'
                    }`}
                  >
                    {deploying ? 'éƒ¨ç½²ä¸­...' : 'ğŸš€ éƒ¨ç½²'}
                  </button>
                </div>

                {contractInfo && (
                  <div
                    className={`mt-2 p-3 rounded-lg border ${
                      contractInfo.isValid
                        ? 'bg-green-100 border-green-300'
                        : 'bg-red-100 border-red-300'
                    }`}
                  >
                    {contractInfo.isValid ? (
                      <div className="text-sm text-green-700">
                        <p>âœ… åˆçº¦éªŒè¯æˆåŠŸ</p>
                        <p>ğŸ“Š å·²å­˜å‚¨æ•°æ®: {contractInfo.userDataCount} æ¡</p>
                      </div>
                    ) : (
                      <p className="text-sm text-red-700">
                        âŒ {contractInfo.error}
                      </p>
                    )}
                  </div>
                )}
              </div>

              {/* æ•°æ®ç±»å‹ */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ğŸ“‚ æ•°æ®ç±»å‹
                </label>
                <select
                  value={form.dataType}
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, dataType: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 outline-none"
                >
                  <option value="user_data">ğŸ‘¤ ç”¨æˆ·æ•°æ®</option>
                  <option value="transaction_log">ğŸ’³ äº¤æ˜“è®°å½•</option>
                  <option value="system_event">âš™ï¸ ç³»ç»Ÿäº‹ä»¶</option>
                  <option value="business_data">ğŸ’¼ ä¸šåŠ¡æ•°æ®</option>
                  <option value="audit_log">ğŸ” å®¡è®¡æ—¥å¿—</option>
                  <option value="custom">ğŸ”§ è‡ªå®šä¹‰</option>
                </select>
              </div>

              {/* æ•°æ®è¾“å…¥ */}
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  ğŸ“„ å­˜å‚¨æ•°æ®
                </label>
                <textarea
                  value={form.data}
                  rows="5"
                  onChange={(e) =>
                    setForm((prev) => ({ ...prev, data: e.target.value }))
                  }
                  className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 outline-none resize-none font-mono text-sm"
                  placeholder='{"name": "Bob", "email": "bob@example.com"}'
                  required
                />
                <p className="text-xs text-gray-500 mt-1">
                  ğŸ“Š æ•°æ®å°†è§¦å‘ DataStored äº‹ä»¶ï¼Œè‡ªåŠ¨è¢«The Graphç´¢å¼•
                </p>
              </div>

              <button
                onClick={handleSubmit}
                disabled={loading || !contractAddress}
                className={`w-full bg-gradient-to-r from-green-500 to-teal-600 text-white py-4 rounded-lg font-semibold transition-all ${
                  loading || !contractAddress
                    ? 'opacity-50'
                    : 'hover:shadow-lg hover:-translate-y-1'
                }`}
              >
                {loading ? 'å†™å…¥ä¸­...' : 'ğŸ“ å†™å…¥åˆçº¦æ•°æ®'}
              </button>
            </div>

            {/* åŠŸèƒ½è¯´æ˜ */}
            <div className="mt-6 bg-green-100 border border-green-300 rounded-lg p-4">
              <h4 className="font-semibold text-green-900 mb-2">
                ğŸ¯ åˆçº¦å­˜å‚¨åŸç†
              </h4>
              <div className="text-sm text-green-800 space-y-1">
                <p>â€¢ ğŸ“ ä¸“ç”¨åˆçº¦æ°¸ä¹…å­˜å‚¨ç»“æ„åŒ–æ•°æ®</p>
                <p>â€¢ ğŸ”” é€šè¿‡äº‹ä»¶æ—¥å¿—è®°å½•æ‰€æœ‰æ“ä½œ</p>
                <p>â€¢ ğŸ¯ The Graphè‡ªåŠ¨ç´¢å¼•äº‹ä»¶æ•°æ®</p>
                <p>â€¢ ğŸ” æ”¯æŒå¤æ‚æŸ¥è¯¢å’Œæ•°æ®åˆ†æ</p>
                <p>â€¢ ğŸ’¾ æ•°æ®ä¸å¯ç¯¡æ”¹ï¼Œæ°¸ä¹…ä¿å­˜</p>
              </div>
            </div>
          </div>
        )
      }

      // ğŸ”„ åˆçº¦æ•°æ®å­˜å‚¨å¤„ç†é€»è¾‘
      async function handleContractStorage(
        params,
        wallet,
        showProgress,
        updateProgress,
        hideProgress,
        showToast
      ) {
        if (!wallet.address) {
          showToast('è¯·å…ˆè¿æ¥é’±åŒ…', 'error')
          return null
        }

        try {
          showProgress('åˆçº¦æ•°æ®å†™å…¥ä¸­...')
          updateProgress(1)

          const provider = new ethers.BrowserProvider(window.ethereum)
          const signer = await provider.getSigner()

          const DATA_STORAGE_ABI = [
            'function storeData(string memory dataType, string memory data) external',
            'event DataStored(address indexed user, string indexed dataType, bytes32 dataHash, string data, uint256 timestamp)'
          ]

          // åˆ›å»ºåˆçº¦å®ä¾‹
          const contract = new ethers.Contract(
            params.contractAddress,
            DATA_STORAGE_ABI,
            signer
          )

          updateProgress(2)

          // ä¼°ç®—Gas
          const gasLimit = await contract.storeData.estimateGas(
            params.dataType,
            params.data
          )

          updateProgress(3)

          // æ‰§è¡Œåˆçº¦å†™å…¥
          const tx = await contract.storeData(params.dataType, params.data, {
            gasLimit: (gasLimit * 120n) / 100n // å¢åŠ 20%ç¼“å†²
          })

          console.log('ğŸ“ åˆçº¦æ•°æ®å†™å…¥äº¤æ˜“:', tx.hash)
          console.log('ğŸ“Š åˆçº¦åœ°å€:', params.contractAddress)

          // ç­‰å¾…ç¡®è®¤
          const receipt = await tx.wait()
          updateProgress(4)

          console.log('âœ… åˆçº¦æ•°æ®å†™å…¥ç¡®è®¤:', receipt)

          // è§£æäº‹ä»¶æ—¥å¿—
          const dataStoredEvent = receipt.logs.find((log) => {
            try {
              const parsed = contract.interface.parseLog(log)
              return parsed.name === 'DataStored'
            } catch {
              return false
            }
          })

          return {
            hash: tx.hash,
            blockNumber: receipt.blockNumber.toString(),
            gasUsed: receipt.gasUsed.toString(),
            data: params.data,
            dataType: params.dataType,
            contractAddress: params.contractAddress,
            eventLog: dataStoredEvent
              ? {
                  user: dataStoredEvent.args.user,
                  dataHash: dataStoredEvent.args.dataHash,
                  timestamp: Number(dataStoredEvent.args.timestamp)
                }
              : null,
            type: 'contract_storage'
          }
        } catch (error) {
          console.error('âŒ åˆçº¦å­˜å‚¨å¤±è´¥:', error)
          throw error
        }
      }

      // ğŸ­ åˆçº¦éƒ¨ç½²é€»è¾‘
      async function deployDataStorageContract(
        showProgress,
        updateProgress,
        hideProgress,
        showToast
      ) {
        try {
          showProgress('éƒ¨ç½²DataStorageåˆçº¦åˆ°Sepolia...')
          updateProgress(1)

          // ç®€åŒ–çš„æ•°æ®å­˜å‚¨åˆçº¦å­—èŠ‚ç ï¼ˆå®é™…é¡¹ç›®ä¸­éœ€è¦å®Œæ•´çš„å­—èŠ‚ç ï¼‰
          const CONTRACT_BYTECODE =
            '0x608060405234801561001057600080fd5b50610500806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c80630f8bb1931461005c5780633bc5de3014610078578063a56dfe4a14610094578063b8e010de146100b0578063f2fde38b146100cc575b600080fd5b6100766004803603810190610071919061032d565b6100e8565b005b610092600480360381019061008d919061037a565b610195565b005b6100ae60048036038101906100a991906103c7565b6101e3565b005b6100ca60048036038101906100c5919061032d565b610231565b005b6100e660048036038101906100e1919061037a565b61027f565b005b600080fd5b50565b'

          const provider = new ethers.BrowserProvider(window.ethereum)
          const signer = await provider.getSigner()

          updateProgress(2)

          // åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè¿™é‡Œéœ€è¦ä½¿ç”¨ ethers.ContractFactory éƒ¨ç½²
          // ç›®å‰æ¨¡æ‹Ÿéƒ¨ç½²è¿‡ç¨‹
          await new Promise((resolve) => setTimeout(resolve, 2000))

          updateProgress(3)

          // ç”Ÿæˆæ¨¡æ‹Ÿåˆçº¦åœ°å€
          const mockAddress =
            '0x' +
            Array.from({ length: 40 }, () =>
              Math.floor(Math.random() * 16).toString(16)
            ).join('')

          updateProgress(4)

          console.log('ğŸ—ï¸ æ•°æ®å­˜å‚¨åˆçº¦éƒ¨ç½²æˆåŠŸ:', mockAddress)

          return mockAddress
        } catch (error) {
          console.error('âŒ åˆçº¦éƒ¨ç½²å¤±è´¥:', error)
          throw error
        }
      }

      // ğŸ“Š åˆçº¦å­˜å‚¨åŠŸèƒ½è¯´æ˜
      const CONTRACT_STORAGE_INFO = {
        title: 'ğŸ“ æ™ºèƒ½åˆçº¦æ•°æ®å­˜å‚¨',
        method: 'Event Logs + The Graph Indexing',
        features: [
          'ğŸ—ï¸ éƒ¨ç½²ä¸“ç”¨DataStorageåˆçº¦',
          'ğŸ“ é€šè¿‡äº‹ä»¶æ—¥å¿—æ°¸ä¹…å­˜å‚¨',
          'ğŸ” The Graphè‡ªåŠ¨ç´¢å¼•äº‹ä»¶',
          'ğŸ“Š æ”¯æŒæ•°æ®ç±»å‹åˆ†ç±»',
          'ğŸ¯ GraphQLæŸ¥è¯¢æ¥å£',
          'ğŸ’¾ æ•°æ®ä¸å¯ç¯¡æ”¹'
        ],
        eventStructure: {
          name: 'DataStored',
          parameters: [
            'address indexed user - ç”¨æˆ·åœ°å€',
            'string indexed dataType - æ•°æ®ç±»å‹',
            'bytes32 dataHash - æ•°æ®å“ˆå¸Œ',
            'string data - å®Œæ•´æ•°æ®',
            'uint256 timestamp - æ—¶é—´æˆ³'
          ]
        },
        theGraphQuery: `
query GetUserData($user: String!) {
  dataStoreds(
    where: { user: $user }
    orderBy: timestamp
    orderDirection: desc
    first: 10
  ) {
    id
    user
    dataType
    dataHash
    data
    timestamp
    blockNumber
    transactionHash
  }
}`
      }
      // ğŸ” æ•°æ®æŸ¥è¯¢ç»„ä»¶ - ä½¿ç”¨The GraphæŠŠæ•°æ®è¯»å›æ¥
      function DataQuery({ onQuery }) {
        const [queryMethod, setQueryMethod] = useState('ethers')
        const [target, setTarget] = useState('')
        const [graphqlQuery, setGraphqlQuery] = useState(`query GetUSDTData {
  dataStoreds(first: 10, orderBy: timestamp, orderDirection: desc) {
    id
    user
    dataHash
    dataType
    timestamp
    blockNumber
    transactionHash
  }
  transfers(first: 5, orderBy: timestamp, orderDirection: desc) {
    id
    from
    to
    value
    timestamp
    blockNumber
  }
}`)
        const [loading, setLoading] = useState(false)
        const [queryResults, setQueryResults] = useState(null)
        const [activeQueryTab, setActiveQueryTab] = useState('chain')

        // é¢„å®šä¹‰æŸ¥è¯¢æ¨¡æ¿
        const QUERY_TEMPLATES = {
          recent_data: `query GetRecentData {
  dataStoreds(first: 5, orderBy: timestamp, orderDirection: desc) {
    id
    user
    dataType
    data
    timestamp
    blockNumber
  }
}`,
          user_transfers: `query GetUserTransfers($user: String!) {
  transfers(where: {or: [{from: $user}, {to: $user}]}, first: 10) {
    id
    from
    to
    value
    timestamp
    transactionHash
  }
}`,
          data_by_type: `query GetDataByType($dataType: String!) {
  dataStoreds(where: {dataType: $dataType}, first: 10) {
    id
    user
    data
    timestamp
    dataHash
  }
}`
        }

        const handleQuery = async (type) => {
          if (type === 'chain' && !target.trim()) {
            alert('è¯·è¾“å…¥äº¤æ˜“å“ˆå¸Œæˆ–åˆçº¦åœ°å€')
            return
          }

          setLoading(true)
          try {
            const result = await onQuery(type, {
              queryMethod,
              target,
              graphqlQuery,
              endpoint:
                'https://api.thegraph.com/subgraphs/name/limuran/usdt-data-tracker'
            })
            setQueryResults(result)
          } finally {
            setLoading(false)
          }
        }

        const loadTemplate = (templateKey) => {
          setGraphqlQuery(QUERY_TEMPLATES[templateKey])
        }

        return (
          <div className="space-y-6">
            {/* æŸ¥è¯¢æ–¹å¼é€‰æ‹© */}
            <div className="flex bg-gray-100 p-1 rounded-xl">
              <button
                onClick={() => setActiveQueryTab('chain')}
                className={`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${
                  activeQueryTab === 'chain'
                    ? 'bg-indigo-500 text-white shadow-md'
                    : 'text-gray-600 hover:bg-white'
                }`}
              >
                ğŸ” é“¾ä¸ŠæŸ¥è¯¢
              </button>
              <button
                onClick={() => setActiveQueryTab('graph')}
                className={`flex-1 py-2 px-4 rounded-lg font-medium transition-all ${
                  activeQueryTab === 'graph'
                    ? 'bg-purple-500 text-white shadow-md'
                    : 'text-gray-600 hover:bg-white'
                }`}
              >
                ğŸ“ˆ The Graph
              </button>
            </div>

            {/* é“¾ä¸Šç›´æ¥æŸ¥è¯¢ */}
            {activeQueryTab === 'chain' && (
              <div className="bg-indigo-50 border border-indigo-200 rounded-xl p-6">
                <h3 className="text-lg font-bold text-indigo-900 mb-4 flex items-center">
                  ğŸ” åŒºå—é“¾æ•°æ®æŸ¥è¯¢
                </h3>
                <p className="text-indigo-700 text-sm mb-4">
                  ä½¿ç”¨Ethers.jsã€Infuraæˆ–Alchemy APIç›´æ¥æŸ¥è¯¢é“¾ä¸Šæ•°æ®
                </p>

                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ğŸ› ï¸ æŸ¥è¯¢æ–¹å¼
                    </label>
                    <select
                      value={queryMethod}
                      onChange={(e) => setQueryMethod(e.target.value)}
                      className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all"
                    >
                      <option value="ethers">1ï¸âƒ£ Ethers.js ç›´æ¥æŸ¥è¯¢</option>
                      <option value="infura">2ï¸âƒ£ Infura API (éœ€é…ç½®)</option>
                      <option value="alchemy">2ï¸âƒ£ Alchemy API (éœ€é…ç½®)</option>
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ğŸ¯ æŸ¥è¯¢ç›®æ ‡
                    </label>
                    <input
                      type="text"
                      value={target}
                      onChange={(e) => setTarget(e.target.value)}
                      className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none font-mono text-sm transition-all"
                      placeholder="0x... (äº¤æ˜“å“ˆå¸Œã€åˆçº¦åœ°å€æˆ–åŒºå—å·)"
                    />
                    <p className="text-xs text-gray-500 mt-1">
                      ğŸ’¡ æ”¯æŒäº¤æ˜“å“ˆå¸Œã€åˆçº¦åœ°å€ã€åŒºå—å·æŸ¥è¯¢
                    </p>
                  </div>

                  <button
                    onClick={() => handleQuery('chain')}
                    disabled={loading}
                    className={`w-full bg-gradient-to-r from-indigo-500 to-blue-600 text-white py-3 px-6 rounded-lg font-semibold transition-all ${
                      loading
                        ? 'opacity-50 cursor-not-allowed'
                        : 'hover:shadow-lg hover:-translate-y-1'
                    }`}
                  >
                    {loading ? 'ğŸ”„ æŸ¥è¯¢ä¸­...' : 'ğŸ” æŸ¥è¯¢é“¾ä¸Šæ•°æ®'}
                  </button>
                </div>
              </div>
            )}

            {/* The GraphæŸ¥è¯¢ */}
            {activeQueryTab === 'graph' && (
              <div className="bg-purple-50 border border-purple-200 rounded-xl p-6">
                <div className="flex items-center mb-4">
                  <span className="text-2xl mr-3">ğŸ“ˆ</span>
                  <div>
                    <h3 className="text-lg font-bold text-purple-900">
                      The Graph å­å›¾æŸ¥è¯¢
                    </h3>
                    <p className="text-purple-700 text-sm">
                      è¿æ¥åˆ°ä½ æ˜¨å¤©éƒ¨ç½²çš„å­å›¾:{' '}
                      <code className="bg-purple-100 px-1 rounded text-xs">
                        usdt-data-tracker
                      </code>
                    </p>
                  </div>
                </div>

                <div className="space-y-4">
                  {/* æŸ¥è¯¢æ¨¡æ¿é€‰æ‹© */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ğŸ“ æŸ¥è¯¢æ¨¡æ¿
                    </label>
                    <div className="grid grid-cols-3 gap-2">
                      <button
                        onClick={() => loadTemplate('recent_data')}
                        className="bg-purple-100 hover:bg-purple-200 text-purple-700 py-2 px-3 rounded-lg text-xs font-medium transition-colors"
                      >
                        ğŸ“Š æœ€æ–°æ•°æ®
                      </button>
                      <button
                        onClick={() => loadTemplate('user_transfers')}
                        className="bg-purple-100 hover:bg-purple-200 text-purple-700 py-2 px-3 rounded-lg text-xs font-medium transition-colors"
                      >
                        ğŸ‘¤ ç”¨æˆ·è½¬è´¦
                      </button>
                      <button
                        onClick={() => loadTemplate('data_by_type')}
                        className="bg-purple-100 hover:bg-purple-200 text-purple-700 py-2 px-3 rounded-lg text-xs font-medium transition-colors"
                      >
                        ğŸ·ï¸ æŒ‰ç±»å‹
                      </button>
                    </div>
                  </div>

                  {/* GraphQLç¼–è¾‘å™¨ */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      ğŸ“Š GraphQL æŸ¥è¯¢ç¼–è¾‘å™¨
                    </label>
                    <textarea
                      value={graphqlQuery}
                      onChange={(e) => setGraphqlQuery(e.target.value)}
                      className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none h-40 font-mono text-sm transition-all"
                      placeholder="è¾“å…¥GraphQLæŸ¥è¯¢..."
                    />
                    <p className="text-xs text-gray-500 mt-1">
                      ğŸ¯ è¿æ¥åˆ°å­å›¾: limuran/usdt-data-tracker
                    </p>
                  </div>

                  <button
                    onClick={() => handleQuery('graph')}
                    disabled={loading}
                    className={`w-full bg-gradient-to-r from-purple-500 to-pink-600 text-white py-3 px-6 rounded-lg font-semibold transition-all ${
                      loading
                        ? 'opacity-50 cursor-not-allowed'
                        : 'hover:shadow-lg hover:-translate-y-1'
                    }`}
                  >
                    {loading ? 'ğŸ”„ æŸ¥è¯¢ä¸­...' : 'â–¶ï¸ æ‰§è¡Œ GraphQL æŸ¥è¯¢'}
                  </button>
                </div>
              </div>
            )}

            {/* æŸ¥è¯¢ç»“æœæ˜¾ç¤º */}
            {queryResults && (
              <div className="bg-white border border-gray-200 rounded-xl p-6 shadow-lg">
                <div className="flex items-center justify-between mb-4">
                  <h4 className="text-lg font-bold text-gray-900 flex items-center">
                    <span className="mr-2">ğŸ“‹</span>æŸ¥è¯¢ç»“æœ
                  </h4>
                  <button
                    onClick={() => setQueryResults(null)}
                    className="text-gray-400 hover:text-gray-600 text-xl"
                  >
                    Ã—
                  </button>
                </div>

                <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                  <pre className="text-sm overflow-auto max-h-80 text-gray-800">
                    {JSON.stringify(queryResults, null, 2)}
                  </pre>
                </div>

                {/* ç»“æœç»Ÿè®¡ */}
                <div className="mt-4 grid grid-cols-3 gap-4">
                  <div className="text-center p-3 bg-blue-50 rounded-lg">
                    <div className="font-bold text-blue-600">
                      {queryResults?.dataStoreds?.length || 0}
                    </div>
                    <div className="text-xs text-gray-600">æ•°æ®è®°å½•</div>
                  </div>
                  <div className="text-center p-3 bg-green-50 rounded-lg">
                    <div className="font-bold text-green-600">
                      {queryResults?.transfers?.length || 0}
                    </div>
                    <div className="text-xs text-gray-600">è½¬è´¦è®°å½•</div>
                  </div>
                  <div className="text-center p-3 bg-purple-50 rounded-lg">
                    <div className="font-bold text-purple-600">
                      {new Date().toLocaleTimeString()}
                    </div>
                    <div className="text-xs text-gray-600">æŸ¥è¯¢æ—¶é—´</div>
                  </div>
                </div>
              </div>
            )}

            {/* The GraphåŠŸèƒ½è¯´æ˜ */}
            <div className="bg-gradient-to-r from-purple-100 to-pink-100 border border-purple-300 rounded-xl p-6">
              <h4 className="font-semibold text-purple-900 mb-3 flex items-center">
                <span className="mr-2">ğŸ“ˆ</span>The Graph é›†æˆä¼˜åŠ¿
              </h4>
              <div className="grid md:grid-cols-2 gap-4 text-sm">
                <div className="space-y-2 text-purple-800">
                  <p>
                    â€¢ ğŸš€ <strong>å®æ—¶ç´¢å¼•:</strong> è‡ªåŠ¨åŒæ­¥é“¾ä¸Šæ•°æ®
                  </p>
                  <p>
                    â€¢ ğŸ” <strong>GraphQL:</strong> çµæ´»çš„æŸ¥è¯¢è¯­è¨€
                  </p>
                  <p>
                    â€¢ âš¡ <strong>é«˜æ€§èƒ½:</strong> æ¯”ç›´æ¥æŸ¥è¯¢å¿«100å€
                  </p>
                  <p>
                    â€¢ ğŸ“Š <strong>èšåˆåˆ†æ:</strong> æ”¯æŒå¤æ‚æ•°æ®ç»Ÿè®¡
                  </p>
                </div>
                <div className="space-y-2 text-purple-800">
                  <p>
                    â€¢ ğŸ¯ <strong>æ˜¨å¤©éƒ¨ç½²:</strong> usdt-data-tracker
                  </p>
                  <p>
                    â€¢ ğŸ”— <strong>å¤šé“¾æ”¯æŒ:</strong> åŒæ­¥å¤šä¸ªåˆçº¦
                  </p>
                  <p>
                    â€¢ ğŸ“ˆ <strong>å†å²æ•°æ®:</strong> å®Œæ•´çš„å†å²è®°å½•
                  </p>
                  <p>
                    â€¢ ğŸ›¡ï¸ <strong>å»ä¸­å¿ƒåŒ–:</strong> åˆ†å¸ƒå¼ç´¢å¼•ç½‘ç»œ
                  </p>
                </div>
              </div>

              <div className="mt-4 p-3 bg-white bg-opacity-50 rounded-lg">
                <p className="text-xs text-purple-700">
                  <strong>ğŸ”— å­å›¾ç«¯ç‚¹:</strong>
                  <code className="bg-purple-200 px-2 py-1 rounded ml-1">
                    https://api.thegraph.com/subgraphs/name/limuran/usdt-data-tracker
                  </code>
                </p>
              </div>
            </div>
          </div>
        )
      }

      // ğŸ” é“¾ä¸Šæ•°æ®æŸ¥è¯¢é€»è¾‘
      async function handleChainQuery(
        params,
        showProgress,
        updateProgress,
        hideProgress,
        showToast
      ) {
        try {
          showProgress('æŸ¥è¯¢é“¾ä¸Šæ•°æ®ä¸­...')
          updateProgress(1)

          const provider = new ethers.BrowserProvider(window.ethereum)
          let result = {}

          updateProgress(2)

          switch (params.queryMethod) {
            case 'ethers':
              // Ethers.jsç›´æ¥æŸ¥è¯¢
              if (
                params.target.startsWith('0x') &&
                params.target.length === 66
              ) {
                // äº¤æ˜“å“ˆå¸ŒæŸ¥è¯¢
                const tx = await provider.getTransaction(params.target)
                const receipt = await provider.getTransactionReceipt(
                  params.target
                )

                result = {
                  type: 'transaction',
                  hash: tx.hash,
                  from: tx.from,
                  to: tx.to,
                  value: ethers.formatEther(tx.value || 0),
                  gasUsed: receipt?.gasUsed?.toString(),
                  blockNumber: tx.blockNumber,
                  data: tx.data,
                  status: receipt?.status
                }
              } else if (
                params.target.startsWith('0x') &&
                params.target.length === 42
              ) {
                // åˆçº¦åœ°å€æŸ¥è¯¢
                const code = await provider.getCode(params.target)
                const balance = await provider.getBalance(params.target)

                result = {
                  type: 'contract',
                  address: params.target,
                  hasCode: code !== '0x',
                  ethBalance: ethers.formatEther(balance),
                  codeSize: Math.floor((code.length - 2) / 2) + ' bytes'
                }
              } else {
                // åŒºå—å·æŸ¥è¯¢
                const blockNumber = parseInt(params.target)
                const block = await provider.getBlock(blockNumber)

                result = {
                  type: 'block',
                  number: block.number,
                  hash: block.hash,
                  timestamp: new Date(block.timestamp * 1000).toLocaleString(),
                  transactions: block.transactions.length,
                  gasUsed: block.gasUsed.toString()
                }
              }
              break

            case 'infura':
            case 'alchemy':
              // APIæŸ¥è¯¢ (æ¨¡æ‹Ÿ)
              result = {
                type: 'api_query',
                method: params.queryMethod,
                target: params.target,
                status: 'éœ€è¦é…ç½®APIå¯†é’¥',
                note: 'è¯·åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›¸åº”çš„APIå¯†é’¥'
              }
              break
          }

          updateProgress(3)
          await new Promise((r) => setTimeout(r, 500))
          updateProgress(4)

          return result
        } catch (error) {
          console.error('âŒ é“¾ä¸ŠæŸ¥è¯¢å¤±è´¥:', error)
          throw new Error('æŸ¥è¯¢å¤±è´¥: ' + error.message)
        }
      }

      // ğŸ“ˆ The GraphæŸ¥è¯¢é€»è¾‘
      async function handleGraphQuery(
        params,
        showProgress,
        updateProgress,
        hideProgress,
        showToast
      ) {
        try {
          showProgress('æ‰§è¡Œ The Graph æŸ¥è¯¢...')
          updateProgress(1)

          const response = await fetch(params.endpoint, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
              Accept: 'application/json'
            },
            body: JSON.stringify({
              query: params.graphqlQuery
            })
          })

          updateProgress(2)

          if (!response.ok) {
            throw new Error(`The Graph APIé”™è¯¯: ${response.status}`)
          }

          const result = await response.json()

          updateProgress(3)
          await new Promise((r) => setTimeout(r, 500))
          updateProgress(4)

          if (result.errors) {
            throw new Error(
              'GraphQLé”™è¯¯: ' + result.errors.map((e) => e.message).join(', ')
            )
          }

          console.log('ğŸ“ˆ The GraphæŸ¥è¯¢ç»“æœ:', result)

          return result.data
        } catch (error) {
          console.error('âŒ The GraphæŸ¥è¯¢å¤±è´¥:', error)
          throw new Error('The GraphæŸ¥è¯¢å¤±è´¥: ' + error.message)
        }
      }

      // ğŸ“Š æŸ¥è¯¢åŠŸèƒ½ç»Ÿè®¡ä¿¡æ¯
      const QUERY_INFO = {
        title: 'ğŸ” åŒºå—é“¾æ•°æ®æŸ¥è¯¢ç³»ç»Ÿ',
        methods: {
          ethers: {
            name: 'Ethers.js ç›´æ¥æŸ¥è¯¢',
            advantages: ['ğŸš€ ç›´æ¥ä¸èŠ‚ç‚¹é€šä¿¡', 'ğŸ”’ æœ€é«˜å®‰å…¨æ€§', 'ğŸ’ å®æ—¶æ•°æ®'],
            limitations: ['â±ï¸ æŸ¥è¯¢é€Ÿåº¦è¾ƒæ…¢', 'ğŸ’° æ¶ˆè€—è¾ƒå¤šèµ„æº']
          },
          infura: {
            name: 'Infura API',
            advantages: ['âš¡ æŸ¥è¯¢é€Ÿåº¦å¿«', 'ğŸŒ ç¨³å®šçš„åŸºç¡€è®¾æ–½', 'ğŸ“Š ä¸°å¯Œçš„API'],
            limitations: ['ğŸ”‘ éœ€è¦APIå¯†é’¥', 'ğŸ“ˆ æœ‰è¯·æ±‚é™åˆ¶']
          },
          alchemy: {
            name: 'Alchemy API',
            advantages: ['ğŸ”¥ æ€§èƒ½ä¼˜å¼‚', 'ğŸ› ï¸ å¼€å‘å·¥å…·ä¸°å¯Œ', 'ğŸ“ˆ é«˜çº§åˆ†æ'],
            limitations: ['ğŸ”‘ éœ€è¦APIå¯†é’¥', 'ğŸ’° é«˜çº§åŠŸèƒ½æ”¶è´¹']
          },
          theGraph: {
            name: 'The Graph å­å›¾',
            advantages: [
              'ğŸ“ˆ GraphQLæŸ¥è¯¢',
              'âš¡ è¶…å¿«æŸ¥è¯¢é€Ÿåº¦',
              'ğŸ“Š å¤æ‚èšåˆ',
              'ğŸ¯ ä¸“é—¨ç´¢å¼•'
            ],
            limitations: ['ğŸ• ç´¢å¼•å»¶è¿Ÿ', 'ğŸ“ éœ€è¦éƒ¨ç½²å­å›¾']
          }
        }
      }

      // ğŸ¬ å¯åŠ¨åº”ç”¨
      const root = ReactDOM.createRoot(document.getElementById('root'))
      root.render(<BlockchainApp />)

      console.log('ğŸ‰ åŒºå—é“¾æ•°æ®ä¸Šé“¾ç³»ç»Ÿå·²å¯åŠ¨ï¼')
      console.log('âœ… æ‰€æœ‰ç»„ä»¶å·²åŠ è½½å®Œæˆ')
      console.log('ğŸ”— æ”¯æŒçš„åŠŸèƒ½:')
      console.log('  1ï¸âƒ£ ETHè½¬è´¦æ•°æ®ä¸Šé“¾ (Ethers.js)')
      console.log('  2ï¸âƒ£ ä»£å¸è½¬è´¦æ•°æ®ä¸Šé“¾ (USDTåˆçº¦)')
      console.log('  ğŸ“ æ™ºèƒ½åˆçº¦äº‹ä»¶å­˜å‚¨')
      console.log('  ğŸ” å¤šç§æ–¹å¼æ•°æ®æŸ¥è¯¢')
      console.log('  ğŸ“ˆ The Graphå­å›¾é›†æˆ')
      console.log('  ğŸ‘› ENSå¤´åƒå’Œåç§°æ”¯æŒ')
      console.log('  ğŸ§® BigNumber.jsç²¾åº¦å¤„ç†')
      console.log('  â³ å®Œæ•´è¿›åº¦æ¡åé¦ˆ')
    </script>
  </body>
</html>
